---
import Button from './Button.astro'
import { SITE, AUTHOR } from '../config'

interface Props {
  title?: string
}

const { title = 'CONTACT' } = Astro.props
const contactEmail = AUTHOR?.email || ''
---
<div class="card-double">
  <header class="card-double-header">
    <div class="card-double-header-left"></div>
    <span class="card-double-title">{title}</span>
    <div class="card-double-header-right"></div>
  </header>
  <section class="card-double-body">
    <p style="margin-bottom: calc(var(--font-size) * var(--theme-line-height-base));">
      Send a message to the crew. All transmissions are encrypted via subspace relay.
    </p>
    
    <form 
      action={`https://formsubmit.co/${contactEmail}`}
      method="POST"
      class="contact-form"
    >
      <input type="hidden" name="_subject" value={`New message from ${SITE.title}`} />
      <input type="hidden" name="_captcha" value="false" />
      <input type="hidden" name="_template" value="table" />
      <input type="text" name="_honey" style="display:none" />
      
      <div class="form-field">
        <label class="form-label">NAME</label>
        <input 
          type="text" 
          name="name" 
          required 
          placeholder="Your designation"
          class="form-input"
        />
      </div>
      
      <div class="form-field">
        <label class="form-label">EMAIL</label>
        <input 
          type="email" 
          name="email" 
          required 
          placeholder="your@subspace.frequency"
          class="form-input"
        />
      </div>
      
      <div class="form-field">
        <label class="form-label">MESSAGE</label>
        <textarea 
          name="message" 
          required 
          rows="6"
          placeholder="Enter your transmission..."
          class="form-textarea"
        ></textarea>
      </div>
      
      <Button type="submit" icon="â­¢" text="TRANSMIT" />
    </form>
  </section>
</div>
